<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>agentic-lib</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; background-color: #f9f9f9; color: #333; }
    header { padding-bottom: 1em; border-bottom: 2px solid #ccc; margin-bottom: 1em; }
    h1 { font-size: 2em; }
    section { margin-bottom: 1.5em; }
    ul { list-style: none; padding: 0; }
    li { margin: 0.5em 0; }
    .label { font-weight: bold; }
    footer { margin-top: 2em; font-size: 0.9em; color: #777; }
    a { color: #0366d6; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <header>
    <h1>agentic-lib</h1>
    <p><a href="https://github.com/xn-intenton-z2a/agentic-lib">repository</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/latest.html">latest stats</a> - <a href="https://xn-intenton-z2a.github.io/agentic-lib/all.html">all stats</a></p>
  </header>
  <section>
    <h1 class="md-github"><a class="md-github__anchor" name="ecmascript_modules" href="#ecmascript_modules"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ECMASCRIPT_MODULES</h1>
<h2 class="md-github"><a class="md-github__anchor" name="crawl-summary" href="#crawl-summary"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Crawl Summary</h2>
<p class="md-github">The technical details detail the Node.js ECMAScript modules implementation. Major topics include enabling ES modules via .mjs and package.json type field, module resolution for relative, bare, and absolute specifiers, required file extensions, URL-based resolution schemes, use of import.meta properties (dirname, filename, url, resolve), interoperability with CommonJS (handling of default export and named export detection), support for JSON and Wasm modules, top-level await usage, and the complete resolution algorithm including subroutines like ESM_RESOLVE, ESM_FILE_FORMAT, PACKAGE_RESOLVE and PACKAGE_TARGET_RESOLVE. The document also covers error conditions and custom loader integration.</p>
<h2 class="md-github"><a class="md-github__anchor" name="normalised-extract" href="#normalised-extract"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Normalised Extract</h2>
<p class="md-github">Table of Contents:</p>
<ol class="md-github">
<li class="md-github">Introduction
<ul class="md-github">
<li class="md-github">Native import/export syntax examples for ES modules.</li>
</ul>
</li>
<li class="md-github">Enabling
<ul class="md-github">
<li class="md-github">Activation via .mjs, package.json &quot;type&quot;: &quot;module&quot;, --input-type flag.</li>
</ul>
</li>
<li class="md-github">Packages
<ul class="md-github">
<li class="md-github">Package file resolution and explicit file extensions.</li>
</ul>
</li>
<li class="md-github">Import Specifiers
<ul class="md-github">
<li class="md-github">Types: Relative, Bare, Absolute and their resolution.</li>
</ul>
</li>
<li class="md-github">Mandatory File Extensions &amp; URLs
<ul class="md-github">
<li class="md-github">Requirement for file extensions, usage of URL schemes, percent encoding details.</li>
</ul>
</li>
<li class="md-github">File: URLs
<ul class="md-github">
<li class="md-github">Behavior when using query parameters and fragments.</li>
</ul>
</li>
<li class="md-github">Data: and Node: Imports
<ul class="md-github">
<li class="md-github">Importing data using MIME types and built-in module via node: URLs.</li>
</ul>
</li>
<li class="md-github">Import Attributes
<ul class="md-github">
<li class="md-github">Inline syntax and supported attributes (type for JSON).</li>
</ul>
</li>
<li class="md-github">Built-in Modules &amp; import() expressions
<ul class="md-github">
<li class="md-github">Default and named exports examples; dynamic import usage.</li>
</ul>
</li>
<li class="md-github">import.meta
<ul class="md-github">
<li class="md-github">Properties: dirname, filename, url, resolve(specifier) with usage examples.</li>
</ul>
</li>
<li class="md-github">Interoperability with CommonJS
<ul class="md-github">
<li class="md-github">Handling of CommonJS modules, absence of __filename/__dirname, and alternative require.resolve.</li>
</ul>
</li>
<li class="md-github">JSON and Wasm Modules
<ul class="md-github">
<li class="md-github">Correct import syntax and experimental flag usage for Wasm.</li>
</ul>
</li>
<li class="md-github">Top-Level Await
<ul class="md-github">
<li class="md-github">Syntax usage and process exit condition if unresolved.</li>
</ul>
</li>
<li class="md-github">Loaders and Resolution Algorithms
<ul class="md-github">
<li class="md-github">Detailed steps for module resolution including algorithms: ESM_RESOLVE and ESM_FILE_FORMAT, handling errors such as Invalid Module Specifier, Package Not Found, and Unsupported Directory Import.</li>
</ul>
</li>
<li class="md-github">Customizing Resolution
<ul class="md-github">
<li class="md-github">Custom loader integration and overriding default behavior.</li>
</ul>
</li>
</ol>
<p class="md-github">Each topic includes specific code examples, exact command line flags, and algorithmic steps developers can directly implement in Node.js environment.</p>
<h2 class="md-github"><a class="md-github__anchor" name="supplementary-details" href="#supplementary-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supplementary Details</h2>
<p class="md-github">Detailed Implementation Steps:</p>
<ul class="md-github">
<li class="md-github">To enable an ES module, rename file to .mjs or set package.json to { &quot;type&quot;: &quot;module&quot; }.</li>
<li class="md-github">For CommonJS, use .cjs or set package.json to { &quot;type&quot;: &quot;commonjs&quot; }.</li>
<li class="md-github">Importing JSON modules must include with { type: 'json' }. Example:
import config from './config.json' with { type: 'json' };</li>
<li class="md-github">Use import.meta.resolve(specifier) to synchronously resolve module URLs. Example:
const assetURL = import.meta.resolve('./asset.css');</li>
</ul>
<p class="md-github">Resolution Algorithm Details:</p>
<ul class="md-github">
<li class="md-github">
<p class="md-github">ESM_RESOLVE(specifier, parentURL):
if (isValidURL(specifier)) {
return { format: undefined, resolved: new URL(specifier).toString() };
} else if (specifier.startsWith(&quot;/&quot;)) {
// Resolve relative to parentURL
} else if (specifier.startsWith(&quot;./&quot;) || specifier.startsWith(&quot;../&quot;)) {
// Use relative URL resolution
} else if (specifier.startsWith(&quot;#&quot;)) {
// Call PACKAGE_IMPORTS_RESOLVE
} else {
// Bare specifier resolution through PACKAGE_RESOLVE
}</p>
</li>
<li class="md-github">
<p class="md-github">ESM_FILE_FORMAT(url):
if (url.endsWith('.mjs')) return 'module';
if (url.endsWith('.cjs')) return 'commonjs';
if (url.endsWith('.json')) return 'json';
if (experimentalWasmModules &amp;&amp; url.endsWith('.wasm')) return 'wasm';
if (experimentalAddonModules &amp;&amp; url.endsWith('.node')) return 'addon';
if (url.endsWith('.js')) {
// Check package.json &quot;type&quot; field and module syntax detection
}</p>
</li>
</ul>
<p class="md-github">Configuration Options:</p>
<ul class="md-github">
<li class="md-github">--input-type=module or --input-type=commonjs forces module interpretation.</li>
<li class="md-github">--experimental-wasm-modules: Enables .wasm module import.</li>
<li class="md-github">--experimental-addon-modules: Enables addon module import for .node files.</li>
</ul>
<p class="md-github">Troubleshooting Procedures:</p>
<ul class="md-github">
<li class="md-github">If a module fails to load with an &quot;Invalid Module Specifier&quot; error, ensure the specifier is a valid URL or relative path including the file extension.</li>
<li class="md-github">For JSON modules, verify the use of { type: 'json' } in the import statement.</li>
<li class="md-github">To debug resolution issues, log the output of import.meta.resolve(specifier) to verify URL resolution.</li>
<li class="md-github">Use node --trace-resolutions flag to trace the resolution process during startup for detailed diagnostic information.</li>
</ul>
<p class="md-github">Best Practices:</p>
<ul class="md-github">
<li class="md-github">Always use explicit file extensions in import statements.</li>
<li class="md-github">In mixed module projects, clearly separate ES modules (.mjs) from CommonJS (.cjs).</li>
<li class="md-github">Employ import.meta properties to derive local paths when __dirname or __filename are not available.</li>
<li class="md-github">Validate package.json exports/imports configuration when using bare specifiers.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="reference-details" href="#reference-details"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reference Details</h2>
<p class="md-github">Complete API Specifications:</p>
<ol class="md-github">
<li class="md-github">
<p class="md-github">import.meta.resolve(specifier, parent?)</p>
<ul class="md-github">
<li class="md-github">Parameters:
<ul class="md-github">
<li class="md-github">specifier (string): The module specifier to resolve relative to the current module.</li>
<li class="md-github">parent (string|URL) [optional]: An absolute parent module URL to use for resolution. Default is import.meta.url.</li>
</ul>
</li>
<li class="md-github">Returns: string – The absolute URL string of the resolved module.</li>
<li class="md-github">Exceptions: Throws if specifier is invalid or resolution fails.</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">ESM_RESOLVE(specifier, parentURL)</p>
<ul class="md-github">
<li class="md-github">An internal algorithm that:
<ul class="md-github">
<li class="md-github">Checks if specifier is a valid URL and reserializes it.</li>
<li class="md-github">Resolves relative specifiers using URL resolution.</li>
<li class="md-github">For bare specifiers, delegates to PACKAGE_RESOLVE.</li>
</ul>
</li>
<li class="md-github">Returns: { format: string | undefined, resolved: string }</li>
<li class="md-github">Throws errors: Invalid Module Specifier, Module Not Found, Unsupported Directory Import.</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">ESM_FILE_FORMAT(url)</p>
<ul class="md-github">
<li class="md-github">Input: url (string) representing the file URL of the module.</li>
<li class="md-github">Returns:
<ul class="md-github">
<li class="md-github">&quot;module&quot; for .mjs</li>
<li class="md-github">&quot;commonjs&quot; for .cjs</li>
<li class="md-github">&quot;json&quot; for .json</li>
<li class="md-github">&quot;wasm&quot; if experimental flag enabled and file ends with .wasm</li>
<li class="md-github">&quot;addon&quot; if experimental flag enabled and file ends with .node</li>
<li class="md-github">For .js files, returns package type based on package.json or detected module syntax.</li>
</ul>
</li>
<li class="md-github">Throws during load phase if format is undefined.</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Dynamic Import Example:
// In a CommonJS module, to import an ES module:
(async () =&gt; {
const module = await import('./module.mjs');
console.log(module);
})();</p>
</li>
<li class="md-github">
<p class="md-github">CommonJS Interoperability Example:
// Import a CommonJS module in an ES module
import cjs from './cjs.cjs';
console.log(cjs);</p>
<p class="md-github">// Using module.createRequire() when __filename and __dirname are needed:
import { createRequire } from 'module';
const require = createRequire(import.meta.url);
const path = require('path');</p>
</li>
</ol>
<p class="md-github">Detailed Troubleshooting:</p>
<ul class="md-github">
<li class="md-github">Command: node --trace-resolutions app.mjs
Expected output: Detailed logs of module resolution steps, including resolved file URLs and any errors in specifier parsing.</li>
<li class="md-github">If top-level await causes process exit with code 13, check for unresolved promises in the module body.</li>
</ul>
<p class="md-github">Implementation Patterns:</p>
<ul class="md-github">
<li class="md-github">Always validate import specifiers with explicit file extensions.</li>
<li class="md-github">Leverage import.meta for resolving relative resources:
const filePath = new URL('./data.proto', import.meta.url);
const data = readFileSync(filePath);</li>
</ul>
<p class="md-github">Configuration Options Summary:</p>
<ul class="md-github">
<li class="md-github">--input-type: 'module' or 'commonjs' (default based on file extension or package.json &quot;type&quot;)</li>
<li class="md-github">--experimental-wasm-modules: boolean (enables .wasm imports)</li>
<li class="md-github">--experimental-addon-modules: boolean (enables .node addon imports)</li>
</ul>
<p class="md-github">Return Types:</p>
<ul class="md-github">
<li class="md-github">All resolution functions return strings (absolute URL) or a structured object containing format and resolved.</li>
</ul>
<p class="md-github">SDK Method Signatures included above are directly usable in Node.js environment as per v23.11.0 documentation.</p>
<h2 class="md-github"><a class="md-github__anchor" name="original-source" href="#original-source"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Original Source</h2>
<p class="md-github">Node.js ECMAScript Modules Documentation
https://nodejs.org/api/esm.html</p>
<h2 class="md-github"><a class="md-github__anchor" name="digest-of-ecmascript_modules" href="#digest-of-ecmascript_modules"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Digest of ECMASCRIPT_MODULES</h2>
<h1 class="md-github"><a class="md-github__anchor" name="ecmascript-modules" href="#ecmascript-modules"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ECMASCRIPT MODULES</h1>
<p class="md-github"><strong class="md-github">Retrieved:</strong> 2023-10-19</p>
<p class="md-github">This document contains the detailed technical specifications for Node.js ECMAScript modules as presented in the Node.js v23.11.0 documentation. The content includes implementation details regarding enabling modules, import specifiers, resolution algorithms, module formats, load process, and interoperability with CommonJS.</p>
<h2 class="md-github"><a class="md-github__anchor" name="introduction" href="#introduction"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<ul class="md-github">
<li class="md-github">
<p class="md-github">ECMAScript modules use native import/export syntax.</p>
</li>
<li class="md-github">
<p class="md-github">Example export:</p>
<p class="md-github">// addTwo.mjs
function addTwo(num) {
return num + 2;
}</p>
<p class="md-github">export { addTwo };</p>
</li>
<li class="md-github">
<p class="md-github">Example import:</p>
<p class="md-github">// app.mjs
import { addTwo } from './addTwo.mjs';
console.log(addTwo(4));</p>
</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="enabling" href="#enabling"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enabling</h2>
<ul class="md-github">
<li class="md-github">
<p class="md-github">ES modules activated by:</p>
<ul class="md-github">
<li class="md-github">.mjs file extension</li>
<li class="md-github">package.json with &quot;type&quot;: &quot;module&quot;</li>
<li class="md-github">--input-type=module flag</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">CommonJS is enforced by:</p>
<ul class="md-github">
<li class="md-github">.cjs file extension</li>
<li class="md-github">package.json with &quot;type&quot;: &quot;commonjs&quot;</li>
<li class="md-github">--input-type=commonjs flag</li>
</ul>
</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="packages" href="#packages"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Packages</h2>
<ul class="md-github">
<li class="md-github">Package resolution rules require explicit file extensions for relative and absolute paths.</li>
<li class="md-github">Directory index files must be fully specified (e.g. './startup/index.js').</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="import-specifiers" href="#import-specifiers"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Import Specifiers</h2>
<ul class="md-github">
<li class="md-github">
<p class="md-github">Specifiers classified as:</p>
<ol class="md-github">
<li class="md-github"><strong class="md-github">Relative:</strong> './startup.js', '../config.mjs'</li>
<li class="md-github"><strong class="md-github">Bare:</strong> 'some-package' or 'some-package/shuffle'</li>
<li class="md-github"><strong class="md-github">Absolute:</strong> 'file:///opt/nodejs/config.js'</li>
</ol>
</li>
<li class="md-github">
<p class="md-github">Node.js resolves bare specifiers through its module resolution and loading algorithm.</p>
</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="mandatory-file-extensions-and-urls" href="#mandatory-file-extensions-and-urls"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mandatory File Extensions and URLs</h2>
<ul class="md-github">
<li class="md-github">File extension required when using import.</li>
<li class="md-github">ES modules are resolved as URLs with percent encoding for special characters.</li>
<li class="md-github">Supported schemes: file:, node:, data:</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="file-urls" href="#file-urls"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>File: URLs</h2>
<ul class="md-github">
<li class="md-github">Modules loaded multiple times if query/fragment differs.</li>
<li class="md-github">Use url.pathToFileURL for resolving paths.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="data-and-node-imports" href="#data-and-node-imports"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Data: and Node: Imports</h2>
<ul class="md-github">
<li class="md-github">
<p class="md-github">data: imports support MIME types:</p>
<ul class="md-github">
<li class="md-github">text/javascript for ES modules</li>
<li class="md-github">application/json for JSON</li>
<li class="md-github">application/wasm for Wasm</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Node: imports allow builtin modules to be referenced with a URL (e.g. import fs from 'node:fs/promises').</p>
</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="import-attributes" href="#import-attributes"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Import Attributes</h2>
<ul class="md-github">
<li class="md-github">Syntax:
import fooData from './foo.json' with { type: 'json' };</li>
<li class="md-github">Only the type attribute is supported; required for JSON modules.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="built-in-modules--import-expressions" href="#built-in-modules--import-expressions"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Built-in Modules &amp; import() expressions</h2>
<ul class="md-github">
<li class="md-github">Built-in modules (like 'node:fs' and 'node:events') export both named and default exports.</li>
<li class="md-github">Dynamic import: supported in both CommonJS and ES modules.</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="importmeta" href="#importmeta"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>import.meta</h2>
<ul class="md-github">
<li class="md-github">Contains properties:
<ul class="md-github">
<li class="md-github">import.meta.dirname: directory of current module (file: modules only)</li>
<li class="md-github">import.meta.filename: absolute path with symlinks resolved (file: modules only)</li>
<li class="md-github">import.meta.url: file URL of the module</li>
<li class="md-github">import.meta.resolve(specifier): synchronous resolution of a specifier relative to the current module</li>
</ul>
</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="interoperability-with-commonjs" href="#interoperability-with-commonjs"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interoperability with CommonJS</h2>
<ul class="md-github">
<li class="md-github">ES module import can load CommonJS modules:
<ul class="md-github">
<li class="md-github">When using CommonJS, module.exports is available as the default export.</li>
<li class="md-github">Named exports may be obtained via static analysis.</li>
<li class="md-github">No __filename, __dirname; use import.meta</li>
<li class="md-github">No Addon Loading, require.resolve, NODE_PATH, require.extensions, require.cache</li>
</ul>
</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="json-and-wasm-modules" href="#json-and-wasm-modules"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JSON and Wasm Modules</h2>
<ul class="md-github">
<li class="md-github">JSON modules must be imported with:
import packageConfig from './package.json' with { type: 'json' };</li>
<li class="md-github">Wasm modules supported via --experimental-wasm-modules flag, e.g. import * as M from './module.wasm';</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="top-level-await" href="#top-level-await"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Top-Level Await</h2>
<ul class="md-github">
<li class="md-github">
<p class="md-github">Top-level await is allowed in ES modules. Example:
export const five = await Promise.resolve(5);</p>
</li>
<li class="md-github">
<p class="md-github">Unresolved promises cause exit with status 13.</p>
</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="loaders-and-resolution-algorithms" href="#loaders-and-resolution-algorithms"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Loaders and Resolution Algorithms</h2>
<ul class="md-github">
<li class="md-github">
<p class="md-github">The default resolver uses:</p>
<ul class="md-github">
<li class="md-github">FileURL-based resolution</li>
<li class="md-github">Relative/absolute URL resolution</li>
<li class="md-github">No default file extensions or folder mains</li>
<li class="md-github">Bare specifier lookup via node_modules</li>
</ul>
</li>
<li class="md-github">
<p class="md-github"><strong class="md-github">ESM_RESOLVE(specifier, parentURL)</strong> returns a tuple { format, resolved } after performing:</p>
<ul class="md-github">
<li class="md-github">URL parsing and reserializing if valid</li>
<li class="md-github">Relative resolution if specifier starts with &quot;/&quot;, &quot;./&quot;, or &quot;../&quot;</li>
<li class="md-github">PACKAGE_RESOLVE for bare specifiers</li>
</ul>
</li>
<li class="md-github">
<p class="md-github"><strong class="md-github">ESM_FILE_FORMAT(url)</strong> algorithm:</p>
<ul class="md-github">
<li class="md-github">Returns &quot;module&quot; for .mjs</li>
<li class="md-github">Returns &quot;commonjs&quot; for .cjs</li>
<li class="md-github">Returns &quot;json&quot; for .json</li>
<li class="md-github">Additional experimental formats: &quot;wasm&quot;, &quot;addon&quot;</li>
<li class="md-github">If .js extension exists, detection of module syntax is performed.</li>
</ul>
</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="resolution-algorithm-specification" href="#resolution-algorithm-specification"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resolution Algorithm Specification</h2>
<ul class="md-github">
<li class="md-github">
<p class="md-github">Outlines detailed steps for:</p>
<ul class="md-github">
<li class="md-github">PACKAGE_RESOLVE</li>
<li class="md-github">PACKAGE_SELF_RESOLVE</li>
<li class="md-github">PACKAGE_EXPORTS_RESOLVE</li>
<li class="md-github">PACKAGE_IMPORTS_RESOLVE</li>
<li class="md-github">PACKAGE_TARGET_RESOLVE</li>
<li class="md-github">PATTERN_KEY_COMPARE</li>
</ul>
</li>
<li class="md-github">
<p class="md-github">Exceptions:</p>
<ul class="md-github">
<li class="md-github">Invalid Module Specifier, Package Configuration, Package Target, Module Not Found, Unsupported Directory Import</li>
</ul>
</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="customizing-esm-specifier-resolution" href="#customizing-esm-specifier-resolution"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Customizing ESM Specifier Resolution</h2>
<ul class="md-github">
<li class="md-github">Custom loaders can override default resolution behavior.</li>
<li class="md-github">Example provided: commonjs-extension-resolution-loader</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="attribution" href="#attribution"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Attribution</h2>
<ul class="md-github">
<li class="md-github">Source: Node.js ECMAScript Modules Documentation</li>
<li class="md-github">URL: https://nodejs.org/api/esm.html</li>
<li class="md-github">License: License: Node.js Foundation License</li>
<li class="md-github">Crawl Date: 2025-04-17T17:55:34.151Z</li>
<li class="md-github">Data Size: 3503502 bytes</li>
<li class="md-github">Links Found: 2152</li>
</ul>
<h2 class="md-github"><a class="md-github__anchor" name="retrieved" href="#retrieved"><svg class="md-github__octicon md-github__octicon-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Retrieved</h2>
<p class="md-github">2025-04-17</p>

  </section>
  <footer>
    <p>Generated on 2025-04-22T00:37:19.948Z</p>
  </footer>
</body>
</html>